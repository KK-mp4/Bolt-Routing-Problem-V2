import{_ as F}from"./BbR8EWZf.js";import{_ as O}from"./BgZNGglI.js";import{u as S}from"./FMAD5iQn.js";import{i as C,s as H,a as D,b as E,l as L,m as w}from"./B7PevS6S.js";import{u as R}from"./c76gRGXA.js";import{f as V,r as T,g as z,c as G,b,w as k,a as A,t as P,u as W,F as q,o as J,d as M}from"./B6KF3lkT.js";class $ extends Map{constructor(n,a=U){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),n!=null)for(const[e,o]of n)this.set(e,o)}get(n){return super.get(I(this,n))}has(n){return super.has(I(this,n))}set(n,a){return super.set(K(this,n),a)}delete(n){return super.delete(Q(this,n))}}function I({_intern:t,_key:n},a){const e=n(a);return t.has(e)?t.get(e):a}function K({_intern:t,_key:n},a){const e=n(a);return t.has(e)?t.get(e):(t.set(e,a),a)}function Q({_intern:t,_key:n},a){const e=n(a);return t.has(e)&&(a=t.get(e),t.delete(e)),a}function U(t){return t!==null&&typeof t=="object"?t.valueOf():t}function X(t,n,a){t=+t,n=+n,a=(o=arguments.length)<2?(n=t,t=0,1):o<3?1:+a;for(var e=-1,o=Math.max(0,Math.ceil((n-t)/a))|0,s=new Array(o);++e<o;)s[e]=t+e*a;return s}const B=Symbol("implicit");function N(){var t=new $,n=[],a=[],e=B;function o(s){let r=t.get(s);if(r===void 0){if(e!==B)return e;t.set(s,r=n.push(s)-1)}return a[r%a.length]}return o.domain=function(s){if(!arguments.length)return n.slice();n=[],t=new $;for(const r of s)t.has(r)||t.set(r,n.push(r)-1);return o},o.range=function(s){return arguments.length?(a=Array.from(s),o):a.slice()},o.unknown=function(s){return arguments.length?(e=s,o):e},o.copy=function(){return N(n,a).unknown(e)},C.apply(o,arguments),o}function _(){var t=N().unknown(void 0),n=t.domain,a=t.range,e=0,o=1,s,r,l=!1,d=0,p=0,m=.5;delete t.unknown;function f(){var i=n().length,h=o<e,g=h?o:e,v=h?e:o;s=(v-g)/Math.max(1,i-d+p*2),l&&(s=Math.floor(s)),g+=(v-g-s*(i-d))*m,r=s*(1-d),l&&(g=Math.round(g),r=Math.round(r));var y=X(i).map(function(u){return g+s*u});return a(h?y.reverse():y)}return t.domain=function(i){return arguments.length?(n(i),f()):n()},t.range=function(i){return arguments.length?([e,o]=i,e=+e,o=+o,f()):[e,o]},t.rangeRound=function(i){return[e,o]=i,e=+e,o=+o,l=!0,f()},t.bandwidth=function(){return r},t.step=function(){return s},t.round=function(i){return arguments.length?(l=!!i,f()):l},t.padding=function(i){return arguments.length?(d=Math.min(1,p=+i),f()):d},t.paddingInner=function(i){return arguments.length?(d=Math.min(1,i),f()):d},t.paddingOuter=function(i){return arguments.length?(p=+i,f()):p},t.align=function(i){return arguments.length?(m=Math.max(0,Math.min(1,i)),f()):m},t.copy=function(){return _(n(),[e,o]).round(l).paddingInner(d).paddingOuter(p).align(m)},C.apply(f(),arguments)}const Y={class:"fixed bottom-0 left-0 text-sm select-none"},Z=A("div",{id:"distance-matrix",class:"p-0 h-full w-full"},null,-1),st=V({__name:"heatmap",setup(t){S({title:"Distance matrix heatmap"});const n=R("distance-matrix",{}),a=T("");z(()=>{e(n.value)});function e(s){const r={top:30,right:30,bottom:150,left:200},l=window.innerWidth-r.left-r.right,d=window.innerHeight-r.top-r.bottom,p=H("#distance-matrix").append("svg").attr("width",l+r.left+r.right).attr("height",d+r.top+r.bottom).append("g").attr("transform",`translate(${r.left}, ${r.top})`),m=s.map(u=>u.station_name),f=_().range([0,l]).domain(m).padding(.01);p.append("g").attr("transform",`translate(0, ${d})`).call(D(f)).selectAll("text").attr("transform","rotate(-45)").attr("x",-5).attr("y",5).style("font-family","Fira Code").style("font-size","10px").style("fill","#fbdfd8").style("text-anchor","end");const i=_().range([d,0]).domain(m).padding(.01);p.append("g").call(E(i)).selectAll("text").attr("x",-8).attr("y",-8).style("font-family","Fira Code").style("fill","#fbdfd8").attr("dy","10px");const h=L().range(["#F4EDE1","#84BBA7"]).domain([0,w(s,u=>w(u.values))]),g=function(u,c){const x=c.value!==null?c.value+" blocks":"does not exist";a.value=`Shortest path from ${m[c.rowIndex]} to ${m[c.colIndex]} - ${x}`},v=function(u,c){const x=c.value!==null?c.value+" blocks":"does not exist";a.value=`Shortest path from ${m[c.rowIndex]} to ${m[c.colIndex]} - ${x}`},y=function(u){a.value=""};p.selectAll().data(s).enter().append("g").selectAll("rect").data((u,c)=>u.values.map((x,j)=>({value:x,rowIndex:c,colIndex:j}))).enter().append("rect").attr("x",u=>f(m[u.colIndex])).attr("y",u=>i(m[u.rowIndex])).attr("width",f.bandwidth()).attr("height",i.bandwidth()).style("fill",u=>h(u.value)).on("mouseover",(u,c)=>g(u,c)).on("mousemove",(u,c)=>v(u,c)).on("mouseleave",u=>y())}function o(){let r="	"+n.value.map(l=>l.station_name).join("	")+`
`;r+=n.value.map(l=>`${l.station_name}	${l.values.join("	")}`).join(`
`),navigator.clipboard.writeText(r)}return(s,r)=>{const l=F,d=O;return J(),G(q,null,[b(l,{to:"/",title:"Go back to main page",class:"fixed top-3 left-3 text-xs"},{default:k(()=>[M("← Back")]),_:1}),b(d,{onClick:o,class:"fixed top-10 left-3 w-[70px]"},{default:k(()=>[M("Copy")]),_:1}),A("p",Y,P(W(a)),1),Z],64)}}});export{st as default};
