var Ut=Object.defineProperty;var Ht=(t,e,n)=>e in t?Ut(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Tt=(t,e,n)=>(Ht(t,typeof e!="symbol"?e+"":e,n),n);import{i as Kt,j as jt,v as Wt,o as tt,c as it,k as Ft,f as Ot,r as dt,g as qt,h as Jt,a as w,b as ct,w as st,u as H,l as xt,m as _t,d as O,t as ut,n as Zt,F as Qt}from"./DWkbExCa.js";import{_ as te}from"./n85pFZBW.js";import{a as J,u as ee}from"./B7MTRyG3.js";import{s as W,d as ne,c as kt,T as vt,e as yt,m as It,l as Bt,b as oe,a as ae}from"./B7PevS6S.js";import"./ScA6IBOd.js";function se(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Q(t,e){if(t=se(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const wt={capture:!0,passive:!1};function Mt(t){t.preventDefault(),t.stopImmediatePropagation()}function ie(t){var e=t.document.documentElement,n=W(t).on("dragstart.drag",Mt,wt);"onselectstart"in e?n.on("selectstart.drag",Mt,wt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function re(t,e){var n=t.document.documentElement,s=W(t).on("dragstart.drag",null);e&&(s.on("click.drag",Mt,wt),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in n?s.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var le=1e-12;function Pt(t){return((t=Math.exp(t))+1/t)/2}function ce(t){return((t=Math.exp(t))-1/t)/2}function ue(t){return((t=Math.exp(2*t))-1)/(t+1)}const he=function t(e,n,s){function i(r,f){var d=r[0],u=r[1],l=r[2],p=f[0],b=f[1],v=f[2],k=p-d,A=b-u,B=k*k+A*A,P,x;if(B<le)x=Math.log(v/l)/e,P=function(Y){return[d+Y*k,u+Y*A,l*Math.exp(e*Y*x)]};else{var N=Math.sqrt(B),G=(v*v-l*l+s*B)/(2*l*n*N),L=(v*v-l*l-s*B)/(2*v*n*N),M=Math.log(Math.sqrt(G*G+1)-G),V=Math.log(Math.sqrt(L*L+1)-L);x=(V-M)/e,P=function(Y){var E=Y*x,R=Pt(M),et=l/(n*N)*(R*ue(e*E+M)-ce(M));return[d+et*k,u+et*A,l*R/Pt(e*E+M)]}}return P.duration=x*1e3*e/Math.SQRT2,P}return i.rho=function(r){var f=Math.max(.001,+r),d=f*f,u=d*d;return t(f,d,u)},i}(Math.SQRT2,2,4),mt=t=>()=>t;function fe(t,{sourceEvent:e,target:n,transform:s,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:i}})}function bt(t){t.stopImmediatePropagation()}function ht(t){t.preventDefault(),t.stopImmediatePropagation()}function de(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function me(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ct(){return this.__zoom||kt}function pe(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ge(){return navigator.maxTouchPoints||"ontouchstart"in this}function xe(t,e,n){var s=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],r=t.invertY(e[0][1])-n[0][1],f=t.invertY(e[1][1])-n[1][1];return t.translate(i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i),f>r?(r+f)/2:Math.min(0,r)||Math.max(0,f))}function _e(){var t=de,e=me,n=xe,s=pe,i=ge,r=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],d=250,u=he,l=ne("start","zoom","end"),p,b,v,k=500,A=150,B=0,P=10;function x(o){o.property("__zoom",Ct).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",et).filter(i).on("touchstart.zoom",pt).on("touchmove.zoom",nt).on("touchend.zoom touchcancel.zoom",rt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(o,m,a,h){var _=o.selection?o.selection():o;_.property("__zoom",Ct),o!==_?M(o,m,a,h):_.interrupt().each(function(){V(this,arguments).event(h).start().zoom(null,typeof m=="function"?m.apply(this,arguments):m).end()})},x.scaleBy=function(o,m,a,h){x.scaleTo(o,function(){var _=this.__zoom.k,y=typeof m=="function"?m.apply(this,arguments):m;return _*y},a,h)},x.scaleTo=function(o,m,a,h){x.transform(o,function(){var _=e.apply(this,arguments),y=this.__zoom,g=a==null?L(_):typeof a=="function"?a.apply(this,arguments):a,T=y.invert(g),I=typeof m=="function"?m.apply(this,arguments):m;return n(G(N(y,I),g,T),_,f)},a,h)},x.translateBy=function(o,m,a,h){x.transform(o,function(){return n(this.__zoom.translate(typeof m=="function"?m.apply(this,arguments):m,typeof a=="function"?a.apply(this,arguments):a),e.apply(this,arguments),f)},null,h)},x.translateTo=function(o,m,a,h,_){x.transform(o,function(){var y=e.apply(this,arguments),g=this.__zoom,T=h==null?L(y):typeof h=="function"?h.apply(this,arguments):h;return n(kt.translate(T[0],T[1]).scale(g.k).translate(typeof m=="function"?-m.apply(this,arguments):-m,typeof a=="function"?-a.apply(this,arguments):-a),y,f)},h,_)};function N(o,m){return m=Math.max(r[0],Math.min(r[1],m)),m===o.k?o:new vt(m,o.x,o.y)}function G(o,m,a){var h=m[0]-a[0]*o.k,_=m[1]-a[1]*o.k;return h===o.x&&_===o.y?o:new vt(o.k,h,_)}function L(o){return[(+o[0][0]+ +o[1][0])/2,(+o[0][1]+ +o[1][1])/2]}function M(o,m,a,h){o.on("start.zoom",function(){V(this,arguments).event(h).start()}).on("interrupt.zoom end.zoom",function(){V(this,arguments).event(h).end()}).tween("zoom",function(){var _=this,y=arguments,g=V(_,y).event(h),T=e.apply(_,y),I=a==null?L(T):typeof a=="function"?a.apply(_,y):a,U=Math.max(T[1][0]-T[0][0],T[1][1]-T[0][1]),C=_.__zoom,$=typeof m=="function"?m.apply(_,y):m,K=u(C.invert(I).concat(U/C.k),$.invert(I).concat(U/$.k));return function(X){if(X===1)X=$;else{var j=K(X),lt=U/j[2];X=new vt(lt,I[0]-j[0]*lt,I[1]-j[1]*lt)}g.zoom(null,X)}})}function V(o,m,a){return!a&&o.__zooming||new Y(o,m)}function Y(o,m){this.that=o,this.args=m,this.active=0,this.sourceEvent=null,this.extent=e.apply(o,m),this.taps=0}Y.prototype={event:function(o){return o&&(this.sourceEvent=o),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(o,m){return this.mouse&&o!=="mouse"&&(this.mouse[1]=m.invert(this.mouse[0])),this.touch0&&o!=="touch"&&(this.touch0[1]=m.invert(this.touch0[0])),this.touch1&&o!=="touch"&&(this.touch1[1]=m.invert(this.touch1[0])),this.that.__zoom=m,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(o){var m=W(this.that).datum();l.call(o,this.that,new fe(o,{sourceEvent:this.sourceEvent,target:x,type:o,transform:this.that.__zoom,dispatch:l}),m)}};function E(o,...m){if(!t.apply(this,arguments))return;var a=V(this,m).event(o),h=this.__zoom,_=Math.max(r[0],Math.min(r[1],h.k*Math.pow(2,s.apply(this,arguments)))),y=Q(o);if(a.wheel)(a.mouse[0][0]!==y[0]||a.mouse[0][1]!==y[1])&&(a.mouse[1]=h.invert(a.mouse[0]=y)),clearTimeout(a.wheel);else{if(h.k===_)return;a.mouse=[y,h.invert(y)],yt(this),a.start()}ht(o),a.wheel=setTimeout(g,A),a.zoom("mouse",n(G(N(h,_),a.mouse[0],a.mouse[1]),a.extent,f));function g(){a.wheel=null,a.end()}}function R(o,...m){if(v||!t.apply(this,arguments))return;var a=o.currentTarget,h=V(this,m,!0).event(o),_=W(o.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",U,!0),y=Q(o,a),g=o.clientX,T=o.clientY;ie(o.view),bt(o),h.mouse=[y,this.__zoom.invert(y)],yt(this),h.start();function I(C){if(ht(C),!h.moved){var $=C.clientX-g,K=C.clientY-T;h.moved=$*$+K*K>B}h.event(C).zoom("mouse",n(G(h.that.__zoom,h.mouse[0]=Q(C,a),h.mouse[1]),h.extent,f))}function U(C){_.on("mousemove.zoom mouseup.zoom",null),re(C.view,h.moved),ht(C),h.event(C).end()}}function et(o,...m){if(t.apply(this,arguments)){var a=this.__zoom,h=Q(o.changedTouches?o.changedTouches[0]:o,this),_=a.invert(h),y=a.k*(o.shiftKey?.5:2),g=n(G(N(a,y),h,_),e.apply(this,m),f);ht(o),d>0?W(this).transition().duration(d).call(M,g,h,o):W(this).call(x.transform,g,h,o)}}function pt(o,...m){if(t.apply(this,arguments)){var a=o.touches,h=a.length,_=V(this,m,o.changedTouches.length===h).event(o),y,g,T,I;for(bt(o),g=0;g<h;++g)T=a[g],I=Q(T,this),I=[I,this.__zoom.invert(I),T.identifier],_.touch0?!_.touch1&&_.touch0[2]!==I[2]&&(_.touch1=I,_.taps=0):(_.touch0=I,y=!0,_.taps=1+!!p);p&&(p=clearTimeout(p)),y&&(_.taps<2&&(b=I[0],p=setTimeout(function(){p=null},k)),yt(this),_.start())}}function nt(o,...m){if(this.__zooming){var a=V(this,m).event(o),h=o.changedTouches,_=h.length,y,g,T,I;for(ht(o),y=0;y<_;++y)g=h[y],T=Q(g,this),a.touch0&&a.touch0[2]===g.identifier?a.touch0[0]=T:a.touch1&&a.touch1[2]===g.identifier&&(a.touch1[0]=T);if(g=a.that.__zoom,a.touch1){var U=a.touch0[0],C=a.touch0[1],$=a.touch1[0],K=a.touch1[1],X=(X=$[0]-U[0])*X+(X=$[1]-U[1])*X,j=(j=K[0]-C[0])*j+(j=K[1]-C[1])*j;g=N(g,Math.sqrt(X/j)),T=[(U[0]+$[0])/2,(U[1]+$[1])/2],I=[(C[0]+K[0])/2,(C[1]+K[1])/2]}else if(a.touch0)T=a.touch0[0],I=a.touch0[1];else return;a.zoom("touch",n(G(g,T,I),a.extent,f))}}function rt(o,...m){if(this.__zooming){var a=V(this,m).event(o),h=o.changedTouches,_=h.length,y,g;for(bt(o),v&&clearTimeout(v),v=setTimeout(function(){v=null},k),y=0;y<_;++y)g=h[y],a.touch0&&a.touch0[2]===g.identifier?delete a.touch0:a.touch1&&a.touch1[2]===g.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),a.taps===2&&(g=Q(g,this),Math.hypot(b[0]-g[0],b[1]-g[1])<P)){var T=W(this).on("dblclick.zoom");T&&T.apply(this,arguments)}}}return x.wheelDelta=function(o){return arguments.length?(s=typeof o=="function"?o:mt(+o),x):s},x.filter=function(o){return arguments.length?(t=typeof o=="function"?o:mt(!!o),x):t},x.touchable=function(o){return arguments.length?(i=typeof o=="function"?o:mt(!!o),x):i},x.extent=function(o){return arguments.length?(e=typeof o=="function"?o:mt([[+o[0][0],+o[0][1]],[+o[1][0],+o[1][1]]]),x):e},x.scaleExtent=function(o){return arguments.length?(r[0]=+o[0],r[1]=+o[1],x):[r[0],r[1]]},x.translateExtent=function(o){return arguments.length?(f[0][0]=+o[0][0],f[1][0]=+o[1][0],f[0][1]=+o[0][1],f[1][1]=+o[1][1],x):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},x.constrain=function(o){return arguments.length?(n=o,x):n},x.duration=function(o){return arguments.length?(d=+o,x):d},x.interpolate=function(o){return arguments.length?(u=o,x):u},x.on=function(){var o=l.on.apply(l,arguments);return o===l?x:o},x.clickDistance=function(o){return arguments.length?(B=(o=+o)*o,x):Math.sqrt(B)},x.tapDistance=function(o){return arguments.length?(P=+o,x):P},x}const ve={__name:"Select",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=Kt(t,"modelValue");return(n,s)=>jt((tt(),it("select",{"onUpdate:modelValue":s[1]||(s[1]=i=>e.value=i),class:"mt-3 rounded-sm bg-primary text-background w-full font-bold outline-none select-none"},[Ft(n.$slots,"default",{onChange:s[0]||(s[0]=i=>n.$emit("update:modelValue"))})],512)),[[Wt,e.value]])}};function q(t,e){const n=t.x-e.x,s=t.z-e.z,i=Math.abs(n),r=Math.abs(s);let f,d;const u=s>=0?-1:1,l=n>=0?-1:1;return i>=r?(f=t.x+l*r,d=t.z+u*r):(f=t.x+l*i,d=t.z+u*i),{x:f,z:d}}function F(t,e){return Math.max(Math.abs(t.x-e.x),Math.abs(t.z-e.z))}function Vt(t,e,n,s,i){t.bolts=[];const r=t.stations,f=r.length;let d=0,u=0;if(n==="track"&&s!==void 0&&i!==void 0)d=s,u=i;else if(n==="median"){const p=r.map(v=>v.x),b=r.map(v=>v.z);d=Math.round(Et(p)),u=Math.round(Et(b))}else if(n==="average"){const p=r.reduce((v,k)=>v+k.x,0),b=r.reduce((v,k)=>v+k.z,0);d=Math.round(p/f),u=Math.round(b/f)}else n==="spawn"&&(d=-80,u=-176);const l={name:"Junction №0",description:"",colour:"#f2a788",x:d,z:u};t.stations.push(l);for(let p=0;p<f;++p){const b=r[p];let v;const k=Math.abs(b.x-l.x)/Math.abs(b.z-l.z);e==8&&k>.57735&&k<1.7321?v=q(l,b):v=q(b,l),t.bolts.push({directed:!1,station_a:l,turn:v,station_b:b,length:F(b,l),colour:"#8f7f10"})}return t}function Et(t){if(t.length===0)throw new Error("Input array is empty");t=[...t].sort((n,s)=>n-s);const e=Math.floor(t.length/2);return t.length%2?t[e]:(t[e-1]+t[e])/2}function ye(t){let e=0,n=0;return t.bolts.forEach(s=>{n+=s.length,s.directed===!1&&(e+=s.length)}),e+=n,[e,n]}function be(t){const e=t.stations,n=t.bolts,s=e.length,i=Number.POSITIVE_INFINITY,r=Array.from({length:s},()=>Array(s).fill(i));for(let u=0;u<s;++u)r[u][u]=0;for(const u of n){const l=e.find(b=>b.name===u.station_a.name),p=e.find(b=>b.name===u.station_b.name);if(l&&p){const b=e.indexOf(l),v=e.indexOf(p);r[b][v]=u.length,r[v][b]=u.length}}for(let u=0;u<s;++u)for(let l=0;l<s;++l)for(let p=0;p<s;++p)r[l][u]!==i&&r[u][p]!==i&&(r[l][p]=Math.min(r[l][p],r[l][u]+r[u][p]));let f=0,d=0;for(let u=0;u<s;++u)for(let l=0;l<s;++l)u!==l&&r[u][l]!==i&&(f+=r[u][l],d++);return ze(r,e),f/d/20}function ze(t,e){const n=[];for(let i=0;i<e.length;++i){const f={station_name:e[i].name,values:[]};for(let d=0;d<e.length;++d)f.values.push(t[i][d]);n.push(f)}const s=JSON.stringify(n);localStorage.setItem("distance-matrix",s)}function zt(t){return t.stations.forEach(e=>{e.colour=we(e.name)}),t.bolts.forEach(e=>{const n=t.stations.find(s=>s.name===e.station_b.name);n?e.colour=n.colour:console.error(`Station ${e.station_b.name} not found in network.`)}),t}function we(t){const e=Me(t),n=80,s=74,i=(1-Math.abs(2*(s/100)-1))*(n/100),r=i*(1-Math.abs(e/60%2-1)),f=s/100-i/2;let d=0,u=0,l=0;e>=0&&e<60?(d=i,u=r):e>=60&&e<120?(d=r,u=i):e>=120&&e<180?(u=i,l=r):e>=180&&e<240?(u=r,l=i):e>=240&&e<300?(d=r,l=i):e>=300&&e<360&&(d=i,l=r);const p=v=>{const k=Math.round(v*255).toString(16);return k.length===1?"0"+k:k};return`#${p(d+f)}${p(u+f)}${p(l+f)}`.toUpperCase()}function Me(t){let e=0;for(let n=0;n<t.length;++n)e=(e<<5)-e+t.charCodeAt(n),e|=0;return Math.abs(e%360)}function ke(t){return t.stations=t.stations.filter(e=>!e.name.includes("Junction №")),t}function Dt(t){t.bolts=[];const e=t.stations,n=e.length;for(let s=0;s<n;++s)for(let i=s+1;i<n;++i){const r=e[s],f=e[i];t.bolts.push({directed:!1,station_a:r,turn:q(r,f),station_b:f,length:F(r,f),colour:"#8f7f10"})}return t}async function Se(t,e){t.bolts=[];const n=t.stations,s=n.length;let i={stations:[],bolts:[]},r=1/0;for(let f=0;f<s;++f){let d=function(k){let A=1/0,B=null;for(let P=0;P<s;++P)if(!u[P]){const x=n[P],N=F(k,x);N<A&&(A=N,B=x)}return B};const u=new Array(s).fill(!1);let l=n[f];u[f]=!0;const p=[];let b;for(;(b=d(l))!==null;)p.push({directed:!1,station_a:l,turn:q(l,b),station_b:b,length:F(l,b),colour:"#8f7f10"}),u[n.indexOf(b)]=!0,l=b;const v=p.reduce((k,A)=>k+A.length,0);v<r&&(i={stations:n.slice(),bolts:p.slice()},r=v,e(i),await new Promise(k=>setTimeout(k,0)))}}function Te(t){const e=t.stations,n=e.length;let s={stations:[],bolts:[]},i=1/0;for(let r=0;r<n;++r){let f=function(v){let k=1/0,A=null;for(let B=0;B<n;++B)if(!d[B]){const P=e[B],x=F(v,P);x<k&&(k=x,A=P)}return A};const d=new Array(n).fill(!1);let u=e[r];d[r]=!0;const l=[];let p;for(;(p=f(u))!==null;)l.push({directed:!0,station_a:u,turn:q(u,p),station_b:p,length:F(u,p),colour:"#8f7f10"}),d[e.indexOf(p)]=!0,u=p;l.push({directed:!0,station_a:u,turn:q(u,e[r]),station_b:e[r],length:F(u,e[r]),colour:"#8f7f10"});const b=l.reduce((v,k)=>v+k.length,0);b<i&&(s={stations:e.slice(),bolts:l.slice()},i=b)}return s}J("scatter-plot",{});function Ie(t){const e=t.stations,n=e.length,s=new Array(n).fill(!1),i=new Array(n).fill(-1),r=new Array(n).fill(1/0);r[0]=0;for(let d=0;d<n-1;++d){const u=Be(r,s);s[u]=!0;for(let l=0;l<n;++l){const p=F(e[u],e[l]);p!==0&&!s[l]&&p<r[l]&&(i[l]=u,r[l]=p)}}const f=[];for(let d=1;d<n;++d)f.push({directed:!1,station_a:{name:e[i[d]].name,x:e[i[d]].x,z:e[i[d]].z},turn:q(e[i[d]],e[d]),station_b:{name:e[d].name,x:e[d].x,z:e[d].z},length:F(e[i[d]],e[d]),colour:"#8f7f10"});return{stations:e.slice(),bolts:f}}function Be(t,e){let n=1/0,s=-1;for(let i=0;i<t.length;i++)!e[i]&&t[i]<n&&(n=t[i],s=i);return s}class Pe{constructor(e){Tt(this,"parent");this.parent=Array(e).fill(-1)}find(e){let n=e;for(;this.parent[n]!==-1;)n=this.parent[n];let s=e;for(;s!==n;){const i=this.parent[s];if(i===s)break;this.parent[s]=n,s=i}return n}union(e,n){const s=this.find(e),i=this.find(n);s!==i&&(this.parent[s]=i)}}function Ce(t){const e=t.stations,n=t.bolts;n.sort((r,f)=>r.length-f.length);const s=new Pe(e.length),i=[];return n.forEach(r=>{const f=e.findIndex(p=>p.name===r.station_a.name),d=e.findIndex(p=>p.name===r.station_b.name),u=s.find(f),l=s.find(d);u!==l&&(i.push(r),s.union(u,l))}),t.bolts=i,t}const Ve={class:"fixed top-0 right-0 w-48 backdrop-blur p-5"},Ee=w("p",{class:"text-center text-accent"},[w("a",{href:"https://github.com/KK-mp4/Bolt-Routing-Problem-V2",target:"_blank",rel:"noopener noreferrer",title:"GitHub"}," Piston Bolt Network Builder "),w("span",{class:"text-[10px] text-text"},"*early alpha build by kk")],-1),De=w("option",{value:"None"},"None",-1),Ae=w("option",{value:"Star graph"},"Star graph (WIP)",-1),Ne=w("option",{value:"Complete graph"},"Complete graph",-1),Ye=w("option",{value:"Nearest neighbor"},"Nearest neighbor (WIP)",-1),Ge=w("option",{value:"Hamiltonian cycle"},"Hamiltonian cycle (WIP)",-1),Le=w("option",{value:"Prim's algorithm"},"Prim's algorithm (WIP)",-1),Xe=w("option",{value:"Kruskal's algorithm"},"Kruskal's algorithm (WIP)",-1),$e={key:0},Re=w("option",{value:"4"},[O("S"),w("sub",null,"4")],-1),Ue=w("option",{value:"8"},[O("S"),w("sub",null,"8")],-1),He=w("option",{value:"median"},"Median",-1),Ke=w("option",{value:"average"},"Average",-1),je=w("option",{value:""},"0, 0",-1),We=w("option",{value:"spawn"},"Spawn",-1),Fe=w("option",{value:"track"},"Track mouse",-1),Oe={class:"fixed top-0 left-0 backdrop-blur p-5 pb-1"},qe={class:"text-xs"},Je=w("br",null,null,-1),Ze={key:0,class:"text-accent"},Qe={key:1,class:"text-accent"},tn={class:"text-xs mt-1"},en=w("br",null,null,-1),nn={class:"text-accent"},on={class:"text-xs mt-1"},an=w("br",null,null,-1),sn={class:"text-accent"},rn={key:0,class:"text-xs mt-1 mb-2"},ln=w("br",null,null,-1),cn={class:"text-accent"},un=w("br",null,null,-1),hn=w("br",null,null,-1),fn={class:"fixed bottom-0 left-0 text-sm select-none"},dn=w("div",{class:"fixed bottom-0 right-0 text-[10px] select-none invisible md:visible"},[w("p",null,"pan: drag mouse1 / zoom: scroll mouse3 / connect: drag mouse3")],-1),mn=w("div",{id:"network_map",class:"p-0 h-full w-full"},null,-1),bn=Ot({__name:"index",setup(t){ee({title:"Piston Bolt Network Builder",description:"Tool for generating and editing piston bolt networks for Minecraft",ogTitle:"Piston Bolt Network Builder",ogDescription:"Tool for generating and editing piston bolt networks for Minecraft",ogImage:"/ogImage.webp",ogUrl:"https://bolt-routing-problem-v2.vercel.app/",twitterTitle:"Piston Bolt Network Builder",twitterDescription:"Tool for generating and editing piston bolt networks for Minecraft",twitterImage:"/ogImage.webp",twitterCard:"summary"});const e=dt(""),n=J("piston-bolt-network",{});let s={},i={},r=[],f=!1;const d=dt(0),u=dt(0),l=dt(0),p=J("graph-type",""),b=J("star-graph-s",8),v=J("star-graph-merge-pos","median");let k=kt;const A=J("show-labels",!1),B=J("colour-graph",!1),P=J("calculate-stats",!0);qt(async()=>{if(window.addEventListener("resize",x),!n.value.stations){const M=await(await fetch("/data/network.json")).json();n.value=M}N()});function x(){const L=document.getElementById("network_map");L!==null&&(L.innerHTML="");const M={top:-1,right:0,bottom:50,left:75},V=window.innerWidth,Y=window.innerHeight,E=V-M.right-M.left,R=Y-M.top-M.bottom,et=It(n.value.stations,c=>Math.abs(c.x))||1e3,pt=It(n.value.stations,c=>Math.abs(c.z))||1e3,nt=Math.max(et,pt)*1.01,rt=E/R;let o,m;rt>1?(o=nt*rt,m=nt):(o=nt,m=nt/rt);const a=Bt().domain([-m,m]).range([M.top,R]),h=Bt().domain([-o,o]).range([M.right,E]),_=oe(a),y=ae(h),g=W("#network_map").append("svg").attr("width",V).attr("height",Y);g.append("g").attr("id","y_axis").attr("transform","translate(75, 0)").call(_).style("font-family","Fira Code").style("font-size","10px"),g.append("g").attr("id","x_axis").attr("transform",`translate(${M.left}, ${Y-M.bottom-M.top})`).call(y).style("font-family","Fira Code").style("font-size","10px");const T=Math.round(Math.min(E,R)/64),I=Math.round(Math.min(E,R)/64*(R/E));g.select("#x_axis").call(y.scale(h).ticks(T).tickSize(-R)),g.select("#y_axis").call(_.scale(a).ticks(I).tickSize(-E)),g.selectAll(".tick line").style("stroke","#422B25");const U=g.append("g").attr("id","edges_a").attr("transform","translate(75, 0)").selectAll("line").data(n.value.bolts).enter().append("line").attr("x1",c=>h(c.station_a.x)).attr("y1",c=>a(c.station_a.z)).attr("x2",c=>h(c.turn.x)).attr("y2",c=>a(c.turn.z)).style("stroke",c=>c.colour).style("stroke-width",1);g.append("defs").selectAll("marker").data(n.value.bolts.filter(c=>c.directed)).enter().append("marker").attr("id",(c,z)=>`arrow-${z}`).attr("viewBox","0 -5 10 10").attr("refX",14).attr("refY",0).attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("fill",c=>c.colour).attr("d","M0,-5L10,0L0,5");const C=g.append("g").attr("id","edges_b").attr("transform","translate(75, 0)").selectAll("line").data(n.value.bolts).enter().append("line").attr("x1",c=>h(c.turn.x)).attr("y1",c=>a(c.turn.z)).attr("x2",c=>h(c.station_b.x)).attr("y2",c=>a(c.station_b.z)).style("stroke",c=>c.colour).style("stroke-width",1).attr("marker-end",(c,z)=>`url(#arrow-${z})`),$=g.append("g").attr("id","vertices").attr("transform","translate(75, 0)").selectAll("circle").data(n.value.stations).enter().append("circle").attr("r",4).attr("cx",c=>h(c.x)).attr("cy",c=>a(c.z)).style("fill",c=>c.colour).on("click",(c,z)=>lt(z)).on("mousedown",(c,z)=>{c.button===1&&At(c,z)}).on("mouseup",(c,z)=>{c.button===1&&Nt(c,z)}),K=g.append("g").attr("id","lables").style("font-family","Fira Code").style("fill","#fbdfd8").style("font-size","10px").selectAll("text").data(n.value.stations).join("text").attr("dy","0.35em").attr("x",c=>h(c.x)).attr("y",c=>a(c.z)-14).text(c=>c.name).style("visibility",A.value?"visible":"hidden"),X=_e().on("zoom",j);g.call(X),k!==void 0&&g.call(X.transform,k),g.on("mousemove",c=>{if(p.value==="Star graph"&&v.value==="track"){const z=g.node();if(!z)return;const D=z.createSVGPoint();D.x=c.offsetX,D.y=c.offsetY;const S=z.getScreenCTM();if(!S)return;const ot=D.matrixTransform(S.inverse()),gt=ot.x-M.left,ft=ot.y-M.top;n.value=Vt(n.value,b.value,v.value,Math.round(h.invert(gt)),Math.round(a.invert(ft))),x(),G()}f&&s.name!==void 0&&(r=[c.offsetX,c.offsetY],Yt(g,s,r))}),g.on("mousedown",c=>{c.button===1&&(f=!0)}),g.on("mouseup",c=>{c.button===1&&(f=!1,g.select("#temp-line").remove())});function j({transform:c}){k=c,W("#y_axis").transition().duration(50).call(S=>_.scale(c.rescaleY(a))),W("#x_axis").transition().duration(50).call(S=>y.scale(c.rescaleY(h)));const z=c.rescaleX(h),D=c.rescaleY(a);g.select("#x_axis").call(y.scale(z).ticks(T).tickSize(-R)),g.select("#y_axis").call(_.scale(D).ticks(I).tickSize(-E)),g.selectAll(".tick line").style("stroke","#422B25"),$.data(n.value.stations).attr("cx",S=>z(S.x)).attr("cy",S=>D(S.z)),K.data(n.value.stations).attr("x",S=>z(S.x)).attr("y",S=>D(S.z)-14),U.data(n.value.bolts).attr("x1",S=>z(S.station_a.x)).attr("y1",S=>D(S.station_a.z)).attr("x2",S=>z(S.turn.x)).attr("y2",S=>D(S.turn.z)),C.data(n.value.bolts).attr("x1",S=>z(S.turn.x)).attr("y1",S=>D(S.turn.z)).attr("x2",S=>z(S.station_b.x)).attr("y2",S=>D(S.station_b.z))}function lt(c){e.value=c.name+" { X: "+c.x+" , Z: "+c.z+" }"}function At(c,z){s={name:z.name,description:"",colour:"",x:z.x,z:z.z},i.x=z.x,i.z=z.z,e.value="Draw bolt from "+s.name}function Nt(c,z){if(!s.name||z.name===s.name)return;const D={name:s.name,description:"",colour:"",x:i.x,z:i.z};n.value.bolts.push({directed:!1,station_a:D,turn:q(D,z),station_b:z,length:F(i,z),colour:"#8f7f10"}),x(),G(),e.value+=" to "+z.name}function Yt(c,z,D){c.select("#temp-line").remove();const S=c.node(),ot=S.createSVGPoint();ot.x=D[0]+2,ot.y=D[1];const gt=S.getScreenCTM(),ft=ot.matrixTransform(gt.inverse()),Gt=ft.x-M.left,Lt=ft.y-M.top,at={name:"",colour:"",description:"",x:h.invert(Gt),z:a.invert(Lt)},Xt=k.rescaleX(h),$t=k.rescaleY(a);z.x=Xt(i.x),z.z=$t(i.z),at.x=h(at.x),at.z=a(at.z);const St=q(z,at),Rt=[{start:z,end:St},{start:St,end:at}];c.append("g").attr("id","temp-line").attr("transform",`translate(${M.left}, ${M.top})`).selectAll("line").data(Rt).enter().append("line").attr("x1",Z=>Z.start.x).attr("y1",Z=>Z.start.z).attr("x2",Z=>Z.end.x).attr("y2",Z=>Z.end.z).style("stroke","gray").style("stroke-width",2).style("stroke-dasharray","5 5")}}async function N(){if(p.value===""){B.value&&(n.value=zt(n.value)),x(),G();return}const L=Date.now();switch(ke(n.value),p.value){case"None":{n.value.bolts=[];break}case"Star graph":{n.value=Vt(n.value,b.value,v.value);break}case"Complete graph":{n.value=Dt(n.value);break}case"Nearest neighbor":{await Se(n.value,M=>{B.value?n.value=zt(M):n.value=M,x(),G()});break}case"Hamiltonian cycle":{n.value=Te(n.value);break}case"Prim's algorithm":{n.value=Ie(n.value);break}case"Kruskal's algorithm":{n.value=Ce(Dt(n.value));break}}e.value="Processing time: "+(Date.now()-L)+"ms",B.value&&(n.value=zt(n.value)),x(),G()}function G(){[d.value,u.value]=ye(n.value),P.value&&(l.value=be(n.value))}return Jt(()=>{window.removeEventListener("resize",x)}),(L,M)=>{const V=ve,Y=te;return tt(),it(Qt,null,[w("div",Ve,[Ee,ct(V,{"aria-label":"Graph type",modelValue:H(p),"onUpdate:modelValue":M[0]||(M[0]=E=>xt(p)?p.value=E:null),onChange:N},{default:st(()=>[De,Ae,Ne,Ye,Ge,Le,Xe]),_:1},8,["modelValue"]),H(p)==="Star graph"?(tt(),it("div",$e,[ct(V,{modelValue:H(b),"onUpdate:modelValue":M[1]||(M[1]=E=>xt(b)?b.value=E:null),onChange:N},{default:st(()=>[Re,Ue]),_:1},8,["modelValue"]),ct(V,{modelValue:H(v),"onUpdate:modelValue":M[2]||(M[2]=E=>xt(v)?v.value=E:null),onChange:N},{default:st(()=>[He,Ke,je,We,Fe]),_:1},8,["modelValue"])])):_t("",!0)]),w("div",Oe,[w("p",qe,[O("Stations:"),Je,H(n).stations?(tt(),it("span",Ze,ut(H(n).stations.length),1)):(tt(),it("span",Qe,"0"))]),w("p",tn,[O("Bolt length:"),en,w("span",nn,ut(H(d))+" blocks",1)]),w("p",on,[O("Tunnel length:"),an,w("span",sn,ut(H(u))+" blocks",1)]),H(P)?(tt(),it("p",rn,[O("Average travel time:"),ln,w("span",cn,ut(Math.round(H(l)*100)/100)+" s",1)])):_t("",!0),ct(Y,{to:"/settings",title:"Setting page",class:"text-xs"},{default:st(()=>[O("Settings ->"),un]),_:1}),H(P)?(tt(),Zt(Y,{key:1,to:"/heatmap",title:"Distance matrix heatmap",class:"text-xs"},{default:st(()=>[O("Heatmap ->"),hn]),_:1})):_t("",!0),ct(Y,{to:"/scatterplot",title:"Scatter plot",class:"text-xs"},{default:st(()=>[O("Scatter plot ->")]),_:1})]),w("p",fn,ut(H(e)),1),dn,mn],64)}}});export{bn as default};
